name: GitHub Actions Demo
#on: [push]
on:
  repository_dispatch:
    types: [hogehoge]
  workflow_dispatch:

env: 
  NODE_SERVER_IP: 121
  NODE_PORT: 8080
  
jobs:

  deploy-for-test:
    runs-on: ubuntu-latest
    steps: 
      - run: echo "hoge"
    
  api-test:
    name: api-test
    runs-on: ubuntu-latest
    needs: deploy-for-test
    container: alpine:3.14.2
    steps:
      - run: curl http://${env.NODE_SERVER_IP}/greeting
      
      


